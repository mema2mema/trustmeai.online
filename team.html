<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My Team — TrustMe AI</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .team-wrap{max-width:760px;margin:0 auto}
    .team-card{padding:1rem}
    .team-row{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.08)}
    .team-row:last-child{border-bottom:0}
    .invite-box{background:rgba(255,255,255,.04);padding:1rem;border-radius:8px;margin:.8rem 0}
    .copy-btn{cursor:pointer;border:0;background:var(--soft);color:#fff;padding:.35rem .75rem;border-radius:6px;font-size:.85rem}
    @media(max-width:640px){
      .team-row{flex-direction:column;align-items:flex-start;gap:.25rem}
    }
  </style>
</head>
<body>

<header>
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:12px 0;">
    <div class="brand"><div class="brand-badge"></div> <div style="letter-spacing:.4px">TrustMe AI</div></div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="strategy.html">Strategy</a>
      <a href="assets.html">Assets</a>
      <a href="deposit.html">Deposit</a>
      <a href="withdraw.html">Withdraw</a>
    </nav>
    <div id="authArea"></div>
  </div>
</header>
<script src="auth-loader.js" defer></script>
<script src="auth-modals.js" defer></script>

<main class="container section team-wrap">
  <h1 style="font-family:Poppins,Inter,sans-serif;font-weight:700">My Team & Referrals</h1>

  <section class="card team-card">
    <div class="stripe"></div>
    <div class="invite-box">
      <div><strong>My Invite Code:</strong> <span id="inviteCode">—</span></div>
      <div style="margin-top:.5rem">
        <input id="inviteLink" class="input" style="width:100%" readonly>
      </div>
      <button class="copy-btn" id="copyInvite" style="margin-top:.5rem">Copy Invite Link</button>
    </div>

    <h2 class="pi-section-title">Referral Stats</h2>
    <div class="team-row"><div>Level 1 Referrals</div><div id="lvl1">0</div></div>
    <div class="team-row"><div>Level 2 Referrals</div><div id="lvl2">0</div></div>
    <div class="team-row"><div>Total Team Size</div><div id="totalTeam">0</div></div>
    <div class="team-row"><div>Total Commissions</div><div id="comm">0 USDT</div></div>
  </section>
</main>

<footer class="footer">
  <div class="container" style="text-align:center">
    <div class="brand" style="justify-content:center"><div class="brand-badge"></div> <div>TrustMe AI</div></div>
    <div class="nav" style="justify-content:center;margin-top:8px">
      <a href="index.html">Home</a>
      <a href="strategy.html">Strategy</a>
      <a href="assets.html">Assets</a>
      <a href="deposit.html">Deposit</a>
      <a href="withdraw.html">Withdraw</a>
    </div>
    <div class="small" style="margin-top:10px">
      Support: <a href="mailto:support@trustmeai.online">support@trustmeai.online</a>
      &nbsp;•&nbsp;
      Telegram: <a href="#" target="_blank" rel="noopener">TrustMe AI Channel</a>
    </div>
    <div class="small" style="margin-top:10px">© TrustMe AI 2025</div>
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const email = localStorage.getItem("tmUserEmail") || "";
    const invite = localStorage.getItem("tmInviteCode") || email.split("@")[0];
    document.getElementById("inviteCode").textContent = invite;
    document.getElementById("inviteLink").value = location.origin + "/?ref=" + encodeURIComponent(invite);

    document.getElementById("copyInvite")?.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(document.getElementById("inviteLink").value);
        alert("Invite link copied!");
      } catch {
        alert(document.getElementById("inviteLink").value);
      }
    });

    // Demo stats (can hook to backend later)
    var myCode = localStorage.getItem("tmInviteCode");
    var l1c = myCode ? (localStorage.getItem("countL1_"+myCode) || localStorage.getItem("tmRefL1") || "0") : (localStorage.getItem("tmRefL1") || "0");
    document.getElementById("lvl1").textContent = l1c;
    var myCode2 = localStorage.getItem("tmInviteCode");
    var l2c = myCode2 ? (localStorage.getItem("countL2_"+myCode2) || localStorage.getItem("tmRefL2") || "0") : (localStorage.getItem("tmRefL2") || "0");
    document.getElementById("lvl2").textContent = l2c;
    const total = (parseInt(document.getElementById("lvl1").textContent||"0",10) + parseInt(document.getElementById("lvl2").textContent||"0",10));
    document.getElementById("totalTeam").textContent = total;
    var myCode = localStorage.getItem('tmInviteCode');
    var earned = myCode ? parseFloat(localStorage.getItem('comm_'+myCode)||'0') : 0;
    document.getElementById('comm').textContent = earned.toFixed(2) + ' USDT';
  });
</script>
</body>
</html>
