<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Strategy — TrustMe AI</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="style.css" rel="stylesheet">
  <style>
    body{background:#0a0f1a;color:#e6f1ff;font-family:sans-serif}
    .container{max-width:900px;margin:40px auto;padding:0 16px}
    .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);
      border-radius:18px;padding:20px;margin-bottom:20px}
    .btn{padding:.6rem .9rem;border-radius:12px;border:1px solid rgba(255,255,255,.2);
      background:#1a2b22;color:#d7ffe6;cursor:pointer}
    input,select{background:transparent;border:1px solid rgba(255,255,255,.2);color:#e6f1ff;
      border-radius:10px;padding:.55rem .7rem}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid rgba(255,255,255,.15);text-align:left}
    header.nav{position:sticky;top:0;background:rgba(6,10,20,.7);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.12)}
    header.nav .wrap{max-width:900px;margin:0 auto;padding:10px 16px;display:flex;align-items:center}
    .brand{color:#fff;font-weight:700;text-decoration:none;margin-right:auto}
  </style>
</head>
<body>
<header class="nav">
  <div class="wrap">
    <a class="brand" href="index.html">TrustMe AI</a>
    <a href="account.html" class="btn" style="margin-left:auto">Account</a>
  </div>
</header>

<main class="container">
  <h1>Activate Strategy</h1>

  <div class="card">
    <label>Tier:
      <select id="tier">
        <option value="Basic">Basic</option>
        <option value="Pro">Pro</option>
        <option value="RedHawk">RedHawk</option>
      </select>
    </label>
    <label>Amount:
      <input id="amt" type="number" min="10" step="1" />
    </label>
    <label>Days:
      <input id="days" type="number" min="1" max="365" value="30" />
    </label>
    <button id="btnActivate" class="btn">Activate</button>
    <p id="msg"></p>
  </div>

  <div class="card">
    <h3>Active Plans</h3>
    <table>
      <thead><tr><th>Tier</th><th>Amount</th><th>Daily %</th><th>Days</th><th>Started</th></tr></thead>
      <tbody id="plansBody"><tr><td colspan="5">Loading…</td></tr></tbody>
    </table>
  </div>
</main>

<script>
const API="http://localhost:8080";

async function activate(){
  const tier=document.getElementById('tier').value;
  const amount=Number(document.getElementById('amt').value||0);
  const days=Number(document.getElementById('days').value||0);
  if(amount<=0)return alert("Enter valid amount");
  const res=await fetch(API+"/plans/activate",{
    method:"POST",headers:{'Content-Type':'application/json'},credentials:'include',
    body:JSON.stringify({tier,amount,days})
  }).then(r=>r.json());
  document.getElementById('msg').textContent="Plan activated!";
  loadPlans();
}

async function loadPlans(){
  const data=await fetch(API+"/plans/positions",{credentials:'include'}).then(r=>r.json());
  const body=document.getElementById('plansBody'); body.innerHTML="";
  if(!data.positions||data.positions.length===0){body.innerHTML="<tr><td colspan=5>No active plans.</td></tr>";return;}
  for(const p of data.positions){
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${p.tier}</td><td>${p.amount}</td><td>${(p.rate_daily*100).toFixed(2)}%</td><td>${p.days}</td><td>${new Date(p.created_at).toLocaleDateString()}</td>`;
    body.appendChild(tr);
  }
}
document.getElementById('btnActivate').onclick=activate;
loadPlans();
</script>
</body>
</html>
