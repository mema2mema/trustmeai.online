<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TrustMe AI — Profit Calculator</title>
  <meta name="description" content="TrustMe AI profit projection calculator with Effective Daily %, table, chart, CSV export, and referral section." />

  <!-- TailwindCSS & Chart.js -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    html { scroll-behavior: smooth; }
    body { background:#0a0a0a; color:#f5f5f5; }
    /* Lint-friendly cross-browser appearance settings */
    select { appearance: none; -webkit-appearance: none; -moz-appearance: none; }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number]{ appearance: textfield; -moz-appearance: textfield; }
    .autoscale { display:inline-block; max-width:100%; white-space:nowrap; }
  </style>
</head>
<body class="bg-neutral-950 text-neutral-100 selection:bg-blue-500 selection:text-white">
  <main class="max-w-7xl mx-auto px-6 md:px-10 py-10">
    <header class="mb-6">
      <h1 class="text-2xl md:text-3xl font-bold">TrustMe AI — Profit Projection</h1>
      <p class="text-neutral-300 mt-1 text-sm md:text-base">Simulate growth for 1–120 days. Switch between Per Day and Per Trade modes.</p>
    </header>

    <!-- Controls + Chart -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Controls -->
      <div class="lg:col-span-1">
        <div class="rounded-3xl border border-neutral-800 bg-neutral-900 p-5">
          <div class="text-sm opacity-80 mb-2">Mode</div>
          <div class="grid grid-cols-2 gap-2">
            <button data-mode="perDay" class="modeBtn rounded-2xl border border-neutral-700 bg-neutral-800 px-4 py-3 text-sm">Per Day</button>
            <button data-mode="perTrade" class="modeBtn rounded-2xl border border-neutral-700 bg-neutral-800 px-4 py-3 text-sm opacity-80">Per Trade</button>
          </div>

          <div class="mt-5 space-y-4">
            <div>
              <label class="text-sm opacity-80">Investment Amount (USDT)</label>
              <input id="amount" type="number" min="0" step="1" value="1000"
                     class="mt-2 w-full rounded-2xl bg-neutral-800 border border-neutral-700 px-3 py-3 focus:outline-none" />
            </div>

            <!-- Per Day controls -->
            <div id="perDayControls" class="space-y-2">
              <label class="text-sm opacity-80">Daily Profit %</label>
              <input id="dailyPct" type="range" min="0" max="50" value="2" step="0.1" class="w-full" />
              <div class="flex justify-between text-xs">
                <span>0%</span> <span id="dailyPctVal">2%</span> <span>50%</span>
              </div>
            </div>

            <!-- Per Trade controls -->
            <div id="perTradeControls" class="space-y-4 hidden">
              <div>
                <label class="text-sm opacity-80">Per Trade %</label>
                <input id="perTradePct" type="range" min="0" max="20" value="1" step="0.1" class="w-full" />
                <div class="flex justify-between text-xs">
                  <span>0%</span> <span id="perTradePctVal">1%</span> <span>20%</span>
                </div>
              </div>
              <div>
                <label class="text-sm opacity-80">Trades / Day</label>
                <input id="tradesPerDay" type="range" min="1" max="100" value="5" step="1" class="w-full" />
                <div class="flex justify-between text-xs">
                  <span>1</span> <span id="tradesPerDayVal">5</span> <span>100</span>
                </div>
              </div>
            </div>

            <div>
              <label class="text-sm opacity-80">Projection Days</label>
              <input id="days" type="range" min="1" max="120" value="30" step="1" class="w-full" />
              <div class="flex justify-between text-xs">
                <span>1</span> <span id="daysVal">30</span> <span>120</span>
              </div>
            </div>

            <!-- Effective Daily % -->
            <div id="effectiveDailyRow" class="mt-3 flex items-center justify-between rounded-2xl bg-neutral-800/60 border border-neutral-700 px-3 py-2">
              <span class="text-sm opacity-80">Effective Daily %</span>
              <span id="effectiveDailyVal" class="text-sm font-semibold text-blue-400">0.00%</span>
            </div>

            <button id="downloadCsv"
                    class="w-full mt-2 rounded-2xl bg-white/10 hover:bg-white/20 px-4 py-3 text-sm border border-white/10">
              Download CSV
            </button>
          </div>
        </div>
      </div>

      <!-- Chart -->
      <div class="lg:col-span-2">
        <div class="mb-3 flex items-center gap-2 text-xs md:text-sm">
          <label for="scaleToggle" class="opacity-80">Chart scale</label>
          <select id="scaleToggle" class="appearance-none bg-neutral-800 border border-neutral-700 rounded-xl px-3 py-2 focus:outline-none">
            <option value="linear">Linear</option>
            <option value="logarithmic">Log</option>
          </select>
        </div>
        <div class="rounded-3xl border border-neutral-800 bg-neutral-900 p-5" style="height:360px">
          <canvas id="equityChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Table -->
    <div class="mt-6 rounded-3xl border border-neutral-800 bg-neutral-900">
      <div class="overflow-x-auto">
        <table class="min-w-full text-left text-sm">
          <thead class="bg-neutral-900/60 border-b border-neutral-800">
            <tr>
              <th class="px-4 py-3 font-medium">Day</th>
              <th class="px-4 py-3 font-medium">Start</th>
              <th class="px-4 py-3 font-medium">Profit</th>
              <th class="px-4 py-3 font-medium">End</th>
            </tr>
          </thead>
          <tbody id="tableBody" class="divide-y divide-neutral-800"></tbody>
        </table>
      </div>
    </div>

    <!-- Referral Section -->
    <section id="referral" class="mt-10 rounded-3xl border border-neutral-800 bg-neutral-900 p-5">
      <div class="flex items-center justify-between flex-wrap gap-3">
        <div>
          <h2 class="text-xl font-semibold">Referral</h2>
          <p class="text-neutral-300 text-sm mt-1">Share your link. Earn % of friends’ profits.</p>
        </div>
        <div class="flex gap-2 w-full sm:w-auto">
          <input id="refLink" class="w-full sm:w-80 rounded-2xl bg-neutral-800 border border-neutral-700 px-3 py-2 text-sm"
                 value="https://trustmeai.online/?ref=YOURCODE" readonly />
          <button id="copyRef" class="rounded-2xl bg-white/10 hover:bg-white/20 px-4 py-2 text-sm border border-white/10">
            Copy
          </button>
        </div>
      </div>

      <div class="grid sm:grid-cols-3 gap-4 mt-5 text-sm">
        <div class="rounded-2xl bg-neutral-800/50 border border-neutral-700 p-4">
          <div class="font-medium">Tier 1</div>
          <div class="text-neutral-300 mt-1">5% of referred profits</div>
        </div>
        <div class="rounded-2xl bg-neutral-800/50 border border-neutral-700 p-4">
          <div class="font-medium">Tier 2</div>
          <div class="text-neutral-300 mt-1">2% of their referrals</div>
        </div>
        <div class="rounded-2xl bg-neutral-800/50 border border-neutral-700 p-4">
          <div class="font-medium">Tier 3</div>
          <div class="text-neutral-300 mt-1">1% bonus</div>
        </div>
      </div>
    </section>
  </main>

  <footer class="py-10 text-center text-xs text-neutral-400">© <span id="year"></span> TrustMe AI</footer>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Elements
    const amountEl = document.getElementById('amount');
    const dailyPctEl = document.getElementById('dailyPct');
    const dailyPctValEl = document.getElementById('dailyPctVal');
    const perTradePctEl = document.getElementById('perTradePct');
    const perTradePctValEl = document.getElementById('perTradePctVal');
    const tradesPerDayEl = document.getElementById('tradesPerDay');
    const tradesPerDayValEl = document.getElementById('tradesPerDayVal');
    const daysEl = document.getElementById('days');
    const daysValEl = document.getElementById('daysVal');
    const tableBody = document.getElementById('tableBody');
    const scaleToggle = document.getElementById('scaleToggle');
    const downloadCsvBtn = document.getElementById('downloadCsv');
    const perDayControls = document.getElementById('perDayControls');
    const perTradeControls = document.getElementById('perTradeControls');
    const modeBtns = document.querySelectorAll('.modeBtn');
    const effectiveDailyVal = document.getElementById('effectiveDailyVal');
    let mode = 'perDay';

    // Mode switching
    modeBtns.forEach(btn => btn.addEventListener('click', () => {
      mode = btn.dataset.mode;
      modeBtns.forEach(b => b.classList.toggle('opacity-80', b !== btn));
      if (mode === 'perDay') { perDayControls.classList.remove('hidden'); perTradeControls.classList.add('hidden'); }
      else { perDayControls.classList.add('hidden'); perTradeControls.classList.remove('hidden'); }
      renderAll();
      updateEffectiveDaily();
    }));

    // Label sync
    const syncLabels = () => {
      dailyPctValEl.textContent = dailyPctEl.value + '%';
      perTradePctValEl.textContent = perTradePctEl.value + '%';
      tradesPerDayValEl.textContent = tradesPerDayEl.value;
      daysValEl.textContent = daysEl.value;
    };
    [amountEl, dailyPctEl, perTradePctEl, tradesPerDayEl, daysEl].forEach(el => {
      el.addEventListener('input', () => { syncLabels(); renderAll(); updateEffectiveDaily(); });
      el.addEventListener('change', () => { syncLabels(); renderAll(); updateEffectiveDaily(); });
    });
    syncLabels();

    // Helpers
    const fmt = (n) => {
      if (!isFinite(n)) return '-';
      const abs = Math.abs(n);
      if (abs >= 1e12) return (n/1e12).toFixed(2) + 'T';
      if (abs >= 1e9)  return (n/1e9 ).toFixed(2) + 'B';
      if (abs >= 1e6)  return (n/1e6 ).toFixed(2) + 'M';
      if (abs >= 1e3)  return (n/1e3 ).toFixed(2) + 'K';
      return n.toFixed(2);
    };
    const makeAutoscaleSpan = (text) => {
      const span = document.createElement('span');
      span.className = 'autoscale';
      span.textContent = text;
      return span;
    };

    // Effective daily computations
    const getEffectiveDaily = () => {
      const pDay = parseFloat(dailyPctEl.value || '0') / 100;
      const pTrade = parseFloat(perTradePctEl.value || '0') / 100;
      const tpd = parseInt(tradesPerDayEl.value || '1', 10);
      return (mode === 'perDay') ? pDay : Math.pow(1 + pTrade, tpd) - 1;
    };
    const fmtPct = (x) => (isFinite(x) ? (x * 100).toFixed(2) + '%' : '-');
    const updateEffectiveDaily = () => {
      effectiveDailyVal.textContent = fmtPct(getEffectiveDaily());
    };

    // Projection
    const project = (amount, days, mode, dailyPct, perTradePct, tradesPerDay) => {
      const rows = [];
      let balance = amount;
      for (let d = 1; d <= days; d++) {
        const start = balance;
        const growthFactor = (mode === 'perDay')
          ? 1 + (dailyPct / 100)
          : Math.pow(1 + (perTradePct / 100), tradesPerDay);
        const end = start * growthFactor;
        rows.push({ day: d, start, profit: end - start, end });
        balance = end;
      }
      return rows;
    };

    // Chart
    const ctx = document.getElementById('equityChart');
    let chart;
    const renderChart = (data) => {
      const labels = data.map(r => r.day);
      const equity = data.map(r => r.end);
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'line',
        data: { labels, datasets: [{ label: 'Equity', data: equity, tension: 0.2 }] },
        options: {
          responsive: true, maintainAspectRatio: false,
          interaction: { mode: 'index', intersect: false },
          plugins: {
            legend: { labels: { color: '#e5e7eb' } },
            tooltip: { callbacks: { label: c => ' ' + new Intl.NumberFormat().format((c.parsed.y??0).toFixed ? c.parsed.y.toFixed(2) : c.parsed.y) } }
          },
          scales: {
            x: { ticks: { color: '#9ca3af' }, grid: { color: 'rgba(255,255,255,.05)' } },
            y: { type: scaleToggle.value, ticks: { color: '#9ca3af' }, grid: { color: 'rgba(255,255,255,.05)' } }
          }
        }
      });
    };
    scaleToggle.addEventListener('change', () => renderAll());

    // Table
    const renderTable = (data) => {
      tableBody.innerHTML = '';
      const frag = document.createDocumentFragment();
      data.forEach(r => {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-neutral-800/40 transition';
        const tdDay = document.createElement('td'); tdDay.className = 'px-4 py-3 text-neutral-300'; tdDay.textContent = r.day;
        const tdStart = document.createElement('td'); tdStart.className = 'px-4 py-3'; tdStart.appendChild(makeAutoscaleSpan('$' + fmt(r.start)));
        const tdProfit = document.createElement('td'); tdProfit.className = 'px-4 py-3 text-green-400'; tdProfit.appendChild(makeAutoscaleSpan('+$' + fmt(r.profit)));
        const tdEnd = document.createElement('td'); tdEnd.className = 'px-4 py-3 font-semibold'; tdEnd.appendChild(makeAutoscaleSpan('$' + fmt(r.end)));
        tr.append(tdDay, tdStart, tdProfit, tdEnd);
        frag.appendChild(tr);
      });
      tableBody.appendChild(frag);
    };

    // CSV
    const toCsv = (data) => {
      const header = ['Day','Start','Profit','End'];
      const rows = data.map(r => [
        r.day,
        r.start.toFixed(8),
        r.profit.toFixed(8),
        r.end.toFixed(8)
      ]);
      return [header, ...rows].map(row => row.join(',')).join('\n');
    };
    downloadCsvBtn.addEventListener('click', () => {
      const amount = parseFloat(amountEl.value || '0');
      const days = parseInt(daysEl.value || '0', 10);
      const dailyPct = parseFloat(dailyPctEl.value || '0');
      const perTradePct = parseFloat(perTradePctEl.value || '0');
      const tpd = parseInt(tradesPerDayEl.value || '1', 10);
      const data = project(amount, days, mode, dailyPct, perTradePct, tpd);
      const blob = new Blob([toCsv(data)], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'trustmeai_projection.csv'; a.click();
      URL.revokeObjectURL(url);
    });

    // Referral copy
    document.getElementById('copyRef').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(document.getElementById('refLink').value);
        const btn = document.getElementById('copyRef');
        const old = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = old, 1200);
      } catch {}
    });

    // Initial render
    const renderAll = () => {
      const amount = parseFloat(amountEl.value || '0');
      const days = parseInt(daysEl.value || '0', 10);
      const dailyPct = parseFloat(dailyPctEl.value || '0');
      const perTradePct = parseFloat(perTradePctEl.value || '0');
      const tpd = parseInt(tradesPerDayEl.value || '1', 10);
      const data = project(amount, days, mode, dailyPct, perTradePct, tpd);
      renderChart(data);
      renderTable(data);
    };
    renderAll();
    updateEffectiveDaily();
  </script>
</body>
</html>
